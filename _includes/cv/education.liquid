{% comment %}
  Unified education entry renderer for both RenderCV and JSONResume formats

  Supported fields:
  - Dates:
    - RenderCV: start_date, end_date
    - JSONResume: startDate, endDate
  - Basic:
    - institution, url, area, studyType (or degree), location, score
  - Extra (custom, from your JSON):
    - department, scientific_project, minor_projects, summary
  - Lists:
    - courses, highlights
{% endcomment %}

<ul class="card-text font-weight-light list-group list-group-flush">
  {% for entry in entries %}
    <li class="list-group-item">
      <div class="row">
        <!-- Left column: Date + Location -->
        <div class="col-xs-2 col-sm-2 col-md-2 text-center date-column">
          {% capture start_date %}
            {% if entry.start_date %}{{ entry.start_date }}{% elsif entry.startDate %}{{ entry.startDate }}{% endif %}
          {% endcapture %}
          {% capture end_date %}
            {% if entry.end_date %}{{ entry.end_date }}{% elsif entry.endDate %}{{ entry.endDate }}{% endif %}
          {% endcapture %}

          {% if start_date != '' %}
            {% assign startYear = start_date | split: '-' | first %}
            {% assign endYear = end_date | split: '-' | first | default: 'Present' %}
            {% assign date = startYear | append: ' - ' | append: endYear %}
          {% else %}
            {% assign date = null %}
          {% endif %}

          <table class="table-cv">
            <tbody>
              <tr>
                <td>
                  {% if date %}
                    <span class="badge font-weight-bold danger-color-dark text-uppercase align-middle" style="min-width: 75px">
                      {{ date }}
                    </span>
                  {% endif %}
                </td>
              </tr>

              {% capture location %}
                {% if entry.location %}{{ entry.location }}{% endif %}
              {% endcapture %}
              {% if location != '' %}
                <tr>
                  <td>
                    <p class="location">
                      <i class="fa-solid fa-location-dot iconlocation"></i>
                      {{ location }}
                    </p>
                  </td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>

        <!-- Right column: Institution (headline) + details -->
        <div class="col-xs-10 col-sm-10 col-md-10 mt-2 mt-md-0">
          {% comment %} Institution as headline {% endcomment %}
          {% if entry.institution %}
            <h4 class="title font-weight-bold ml-1 ml-md-4 mb-1">
              {% if entry.url %}
                <a href="{{ entry.url }}" target="_blank" rel="noopener">{{ entry.institution }}</a>
              {% else %}
                {{ entry.institution }}
              {% endif %}
            </h4>
          {% endif %}

          {% comment %} Degree / study type + area + GPA {% endcomment %}
          {% capture study_type %}
            {% if entry.studyType %}{{ entry.studyType }}{% elsif entry.degree %}{{ entry.degree }}{% endif %}
          {% endcapture %}

          {% if study_type != '' or entry.area or entry.score %}
            <p class="ml-1 ml-md-4 mb-1" style="font-size: 0.95rem;">
              {% if study_type != '' %}<strong>{{ study_type }}</strong>{% endif %}
              {% if study_type != '' and entry.area %} — {% endif %}
              {% if entry.area %}<em>{{ entry.area }}</em>{% endif %}
              {% if entry.score %} · GPA: {{ entry.score }}{% endif %}
            </p>
          {% endif %}

          {% comment %} Custom/extra fields from your JSON {% endcomment %}
          {% if entry.department %}
            <p class="ml-1 ml-md-4 mb-1"><strong>Program/Department:</strong> {{ entry.department }}</p>
          {% endif %}

          {% if entry.scientific_project %}
            <p class="ml-1 ml-md-4 mb-1"><strong>Scientific project:</strong> {{ entry.scientific_project }}</p>
          {% endif %}

          {% if entry.minor_projects %}
            <p class="ml-1 ml-md-4 mb-1"><strong>Additional projects:</strong> {{ entry.minor_projects }}</p>
          {% endif %}

          {% if entry.summary %}
            <p class="ml-1 ml-md-4 mb-1">{{ entry.summary }}</p>
          {% endif %}

          {% comment %} Courses + highlights (standard support) {% endcomment %}
          {% if entry.courses or entry.highlights %}
            <ul class="items ml-1 ml-md-4">
              {% for item in entry.courses %}
                <li><span class="item">{{ item }}</span></li>
              {% endfor %}
              {% for item in entry.highlights %}
                <li><span class="item">{{ item | markdownify | remove: '<p>' | remove: '</p>' }}</span></li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      </div>
    </li>
  {% endfor %}
</ul>
